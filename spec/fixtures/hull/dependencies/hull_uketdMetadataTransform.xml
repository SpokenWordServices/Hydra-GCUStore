<?xml version="1.0" encoding="UTF-8"?>
<foxml:digitalObject VERSION="1.1" PID="hull:uketdMetadataTransform"
xmlns:foxml="info:fedora/fedora-system:def/foxml#"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="info:fedora/fedora-system:def/foxml# http://www.fedora.info/definitions/1/0/foxml1-1.xsd">
<foxml:objectProperties>
<foxml:property NAME="info:fedora/fedora-system:def/model#state" VALUE="Active"/>
<foxml:property NAME="info:fedora/fedora-system:def/model#label" VALUE="XSL stylesheet for transforming metadata from UKETD_DC  to MODS"/>
<foxml:property NAME="info:fedora/fedora-system:def/model#ownerId" VALUE="fedoraAdmin"/>
<foxml:property NAME="info:fedora/fedora-system:def/model#createdDate" VALUE="2009-07-13T16:01:36.845Z"/>
<foxml:property NAME="info:fedora/fedora-system:def/view#lastModifiedDate" VALUE="2011-03-30T16:01:49.727Z"/>
</foxml:objectProperties>
<foxml:datastream ID="AUDIT" STATE="A" CONTROL_GROUP="X" VERSIONABLE="false">
<foxml:datastreamVersion ID="AUDIT.0" LABEL="Audit Trail for this object" CREATED="2009-07-13T16:01:36.845Z" MIMETYPE="text/xml" FORMAT_URI="info:fedora/fedora-system:format/xml.fedora.audit">
<foxml:xmlContent>
<audit:auditTrail xmlns:audit="info:fedora/fedora-system:def/audit#">
<audit:record ID="AUDREC1">
<audit:process type="Fedora API-M"/>
<audit:action>modifyDatastreamByValue</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-01-18T11:00:10.685Z</audit:date>
<audit:justification></audit:justification>
</audit:record>
<audit:record ID="AUDREC2">
<audit:process type="Fedora API-M"/>
<audit:action>ingest</audit:action>
<audit:componentID></audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-01-18T12:15:30.920Z</audit:date>
<audit:justification>Ingested from local file C:\Users\Simon\Desktop\hydra_uketddc.xml</audit:justification>
</audit:record>
<audit:record ID="AUDREC3">
<audit:process type="Fedora API-M"/>
<audit:action>modifyDatastreamByValue</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-01-18T15:54:13.968Z</audit:date>
<audit:justification></audit:justification>
</audit:record>
<audit:record ID="AUDREC4">
<audit:process type="Fedora API-M"/>
<audit:action>modifyDatastreamByValue</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-01-27T15:33:11.844Z</audit:date>
<audit:justification></audit:justification>
</audit:record>
<audit:record ID="AUDREC5">
<audit:process type="Fedora API-M"/>
<audit:action>purgeDatastream</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-01-27T15:34:05.813Z</audit:date>
<audit:justification>DatastreamPane generated this logMessage. . . . Purged datastream (ID=XSL), versions ranging from 2009-08-14T12:02:02.601Z to 2011-01-18T15:54:13.968Z.  This resulted in the permanent removal of 3 datastream version(s) (2009-08-14T12:02:02.601Z, 2011-01-18T11:00:10.685Z, 2011-01-18T15:54:13.968Z) and all associated audit records.</audit:justification>
</audit:record>
<audit:record ID="AUDREC6">
<audit:process type="Fedora API-M"/>
<audit:action>modifyDatastreamByValue</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-02-03T10:01:39.563Z</audit:date>
<audit:justification></audit:justification>
</audit:record>
<audit:record ID="AUDREC7">
<audit:process type="Fedora API-M"/>
<audit:action>purgeDatastream</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-02-03T10:02:05.436Z</audit:date>
<audit:justification>DatastreamPane generated this logMessage. . . . Purged datastream (ID=XSL), versions ranging from 2011-01-27T15:33:11.844Z to 2011-01-27T15:33:11.844Z.  This resulted in the permanent removal of 1 datastream version(s) (2011-01-27T15:33:11.844Z) and all associated audit records.</audit:justification>
</audit:record>
<audit:record ID="AUDREC8">
<audit:process type="Fedora API-M"/>
<audit:action>modifyDatastreamByValue</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-02-03T10:05:06.542Z</audit:date>
<audit:justification></audit:justification>
</audit:record>
<audit:record ID="AUDREC9">
<audit:process type="Fedora API-M"/>
<audit:action>purgeDatastream</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-02-03T10:05:23.122Z</audit:date>
<audit:justification>DatastreamPane generated this logMessage. . . . Purged datastream (ID=XSL), versions ranging from 2011-02-03T10:01:39.563Z to 2011-02-03T10:01:39.563Z.  This resulted in the permanent removal of 1 datastream version(s) (2011-02-03T10:01:39.563Z) and all associated audit records.</audit:justification>
</audit:record>
<audit:record ID="AUDREC10">
<audit:process type="Fedora API-M"/>
<audit:action>modifyDatastreamByValue</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-02-03T11:55:13.277Z</audit:date>
<audit:justification></audit:justification>
</audit:record>
<audit:record ID="AUDREC11">
<audit:process type="Fedora API-M"/>
<audit:action>purgeDatastream</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-02-03T11:55:47.858Z</audit:date>
<audit:justification>DatastreamPane generated this logMessage. . . . Purged datastream (ID=XSL), versions ranging from 2011-02-03T10:05:06.542Z to 2011-02-03T10:05:06.542Z.  This resulted in the permanent removal of 1 datastream version(s) (2011-02-03T10:05:06.542Z) and all associated audit records.</audit:justification>
</audit:record>
<audit:record ID="AUDREC12">
<audit:process type="Fedora API-M"/>
<audit:action>modifyDatastreamByValue</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-02-21T15:22:26.812Z</audit:date>
<audit:justification></audit:justification>
</audit:record>
<audit:record ID="AUDREC13">
<audit:process type="Fedora API-M"/>
<audit:action>purgeDatastream</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-02-21T15:22:40.856Z</audit:date>
<audit:justification>DatastreamPane generated this logMessage. . . . Purged datastream (ID=XSL), versions ranging from 2011-02-03T11:55:13.277Z to 2011-02-03T11:55:13.277Z.  This resulted in the permanent removal of 1 datastream version(s) (2011-02-03T11:55:13.277Z) and all associated audit records.</audit:justification>
</audit:record>
<audit:record ID="AUDREC14">
<audit:process type="Fedora API-M"/>
<audit:action>modifyDatastreamByValue</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-02-24T11:39:19.311Z</audit:date>
<audit:justification></audit:justification>
</audit:record>
<audit:record ID="AUDREC15">
<audit:process type="Fedora API-M"/>
<audit:action>purgeDatastream</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-02-24T11:39:41.758Z</audit:date>
<audit:justification>DatastreamPane generated this logMessage. . . . Purged datastream (ID=XSL), versions ranging from 2011-02-21T15:22:26.812Z to 2011-02-21T15:22:26.812Z.  This resulted in the permanent removal of 1 datastream version(s) (2011-02-21T15:22:26.812Z) and all associated audit records.</audit:justification>
</audit:record>
<audit:record ID="AUDREC16">
<audit:process type="Fedora API-M"/>
<audit:action>modifyDatastreamByValue</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-03-29T22:27:29.441Z</audit:date>
<audit:justification></audit:justification>
</audit:record>
<audit:record ID="AUDREC17">
<audit:process type="Fedora API-M"/>
<audit:action>setDatastreamVersionable</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-03-29T22:27:29.441Z</audit:date>
<audit:justification></audit:justification>
</audit:record>
<audit:record ID="AUDREC18">
<audit:process type="Fedora API-M"/>
<audit:action>modifyDatastreamByValue</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-03-30T15:57:36.153Z</audit:date>
<audit:justification></audit:justification>
</audit:record>
<audit:record ID="AUDREC19">
<audit:process type="Fedora API-M"/>
<audit:action>modifyDatastreamByValue</audit:action>
<audit:componentID>XSL</audit:componentID>
<audit:responsibility>fedoraAdmin</audit:responsibility>
<audit:date>2011-03-30T16:01:49.727Z</audit:date>
<audit:justification></audit:justification>
</audit:record>
</audit:auditTrail>
</foxml:xmlContent>
</foxml:datastreamVersion>
</foxml:datastream>
<foxml:datastream ID="DC" STATE="A" CONTROL_GROUP="X" VERSIONABLE="true">
<foxml:datastreamVersion ID="DC1.0" LABEL="Dublin Core Record for this object" CREATED="2009-07-13T16:01:36.845Z" MIMETYPE="text/xml" FORMAT_URI="http://www.openarchives.org/OAI/2.0/oai_dc/" SIZE="420">
<foxml:xmlContent>
<oai_dc:dc xmlns:oai_dc="http://www.openarchives.org/OAI/2.0/oai_dc/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/oai_dc/ http://www.openarchives.org/OAI/2.0/oai_dc.xsd">
  <dc:title>XSL stylesheet for transforming metadata</dc:title>
  <dc:identifier>hull:uketdMetadataTransform</dc:identifier>
</oai_dc:dc>
</foxml:xmlContent>
</foxml:datastreamVersion>
</foxml:datastream>
<foxml:datastream ID="XSL" STATE="A" CONTROL_GROUP="X" VERSIONABLE="false">
<foxml:datastreamVersion ID="XSL.2" LABEL="Enter a label here." CREATED="2011-03-30T16:01:49.727Z" MIMETYPE="text/xml" SIZE="6453">
<foxml:xmlContent>
<xsl:stylesheet xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:oai_dc="http://www.openarchives.org/OAI/2.0/oai_dc/" xmlns:uketd_dc="http://naca.central.cranfield.ac.uk/ethos-oai/2.0/" xmlns:uketdterms="http://naca.central.cranfield.ac.uk/ethos-oai/terms/" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" exclude-result-prefixes="oai_dc dc uketdterms uketd_dc dcterms " version="1.0">
  <xsl:param name="pid"></xsl:param>
  <xsl:preserve-space elements="*"></xsl:preserve-space>
  <xsl:output encoding="UTF-8" indent="yes" media-type="text/xml" method="xml"></xsl:output>
  <xsl:template match="/">
    <xsl:variable name="uketdMetadata" select="//parent::uketd_dc:uketddc"></xsl:variable>
    <mods xmlns="http://www.loc.gov/mods/v3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.loc.gov/mods/v3 http://www.loc.gov/standards/mods/v3/mods-3-3.xsd">
      <titleInfo>
        <xsl:for-each select="$uketdMetadata/dc:title">
          <title>
            <xsl:value-of select="$uketdMetadata/dc:title/text()"></xsl:value-of>
          </title>
        </xsl:for-each>
      </titleInfo>
      <xsl:for-each select="$uketdMetadata/dc:creator">
        <name type="personal">
          <namePart>
            <xsl:value-of select="text()"></xsl:value-of>
          </namePart>
          <role>
            <roleTerm type="text">creator</roleTerm>
          </role>
        </name>
      </xsl:for-each>
      <xsl:for-each select="$uketdMetadata/uketdterms:advisor">
        <name type="personal">
          <namePart>
            <xsl:value-of select="substring-before(text(), &apos; (&apos;)"></xsl:value-of>
          </namePart>
          <role>
            <roleTerm type="text">Thesis advisor</roleTerm>
          </role>
        </name>
      </xsl:for-each>
      <xsl:if test="$uketdMetadata/uketdterms:sponsor">
        <xsl:for-each select="$uketdMetadata/uketdterms:sponsor">
          <name type="corporate">
            <namePart>
              <xsl:choose>
                <xsl:when test="contains(text(), &apos;(sponsor)&apos;)">
                  <xsl:value-of select="substring-before(text(), &apos; (sponsor)&apos;)"></xsl:value-of>
                </xsl:when>
                <xsl:otherwise>
                  <xsl:value-of select="text()"></xsl:value-of>
                </xsl:otherwise>
              </xsl:choose>
            </namePart>
            <role>
              <roleTerm type="text">Sponsor</roleTerm>
            </role>
          </name>
        </xsl:for-each>
      </xsl:if>
      <typeOfResource>text</typeOfResource>
      <genre>Thesis or dissertation</genre>
      <xsl:if test="$uketdMetadata/uketdterms:grantnumber">
        <identifier type="grantNumber">
          <xsl:value-of select="$uketdMetadata/uketdterms:grantnumber/text()"></xsl:value-of>
        </identifier>
      </xsl:if>
      <originInfo>
        <publisher>
          <xsl:value-of select="concat($uketdMetadata/uketdterms:department/text(),&apos;, &apos;, $uketdMetadata/uketdterms:institution/text())"></xsl:value-of>
        </publisher>
        <dateIssued encoding="w3cdtf" keyDate="yes">
          <xsl:value-of select="$uketdMetadata/dcterms:issued/text()"></xsl:value-of>
        </dateIssued>
      </originInfo>
      <language>
        <languageTerm type="text">English</languageTerm>
        <languageTerm authority="iso639-2b" type="code">eng</languageTerm>
      </language>
      <physicalDescription>
        <extent>
          <xsl:value-of select="$uketdMetadata/dcterms:extent/text()"></xsl:value-of>
        </extent>
        <internetMediaType>application/pdf</internetMediaType>
        <digitalOrigin>born digital</digitalOrigin>
      </physicalDescription>
      <abstract>
        <xsl:value-of select="$uketdMetadata/dcterms:abstract/text()"></xsl:value-of>
      </abstract>
      <xsl:if test="$uketdMetadata/uketdterms:qualificationlevel">
        <note type="qualificationLevel">
          <xsl:value-of select="$uketdMetadata/uketdterms:qualificationlevel/text()"></xsl:value-of>
        </note>
      </xsl:if>
      <xsl:if test="$uketdMetadata/uketdterms:qualificationname">
        <note type="qualificationName">
          <xsl:value-of select="$uketdMetadata/uketdterms:qualificationname/text()"></xsl:value-of>
        </note>
      </xsl:if>
      <xsl:if test="$uketdMetadata/dc:subject">
        <subject authority="UoH">
          <xsl:for-each select="$uketdMetadata/dc:subject">
            <topic>
              <xsl:value-of select="text()"></xsl:value-of>
            </topic>
          </xsl:for-each>
        </subject>
      </xsl:if>
      <identifier type="fedora">
        <xsl:value-of select="$pid"></xsl:value-of>
      </identifier>
      <location>
        <url access="object in context" usage="primary display">
          <xsl:value-of select="concat(&apos;http://hydra.hull.ac.uk/assets/&apos;, $pid)"></xsl:value-of>
        </url>
        <url access="raw object">
          <xsl:value-of select="concat(&apos;http://hydra.hull.ac.uk/assets/&apos;, $pid, &apos;a/genericContent/content&apos;)"></xsl:value-of>
        </url>
      </location>
      <accessCondition type="useAndReproduction">
        <xsl:value-of select="$uketdMetadata/dc:rights/text()"></xsl:value-of>
      </accessCondition>
      <xsl:if test="$uketdMetadata/uketdterms:embargotype">
        <accessCondition>
          <xsl:value-of select="concat($uketdMetadata/uketdterms:embargotype/text(), &apos; embargo&apos;)"></xsl:value-of>
        </accessCondition>
        <accessCondition type="restriction on access">
          <xsl:value-of select="concat(&apos;Embargoed. &apos;, &apos;(&apos;, $uketdMetadata/uketdterms:embargoreason/text(), &apos;) &apos;, &apos;Full text cannot be viewed until &apos;, $uketdMetadata/uketdterms:embargodate/text())"></xsl:value-of>
        </accessCondition>
      </xsl:if>
      <recordInfo>
        <recordContentSource>The University of Hull</recordContentSource>
        <recordCreationDate encoding="w3cdtf">
          <xsl:value-of select="$uketdMetadata/dc:date/text()"></xsl:value-of>
        </recordCreationDate>
        <recordChangeDate encoding="w3cdtf"></recordChangeDate>
        <languageOfCataloging>
          <languageTerm authority="iso639-2b">eng</languageTerm>
        </languageOfCataloging>
      </recordInfo>
    </mods>
  </xsl:template>
</xsl:stylesheet>
</foxml:xmlContent>
</foxml:datastreamVersion>
</foxml:datastream>
</foxml:digitalObject>